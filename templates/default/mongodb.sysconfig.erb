# This config file is auto-generated by chef
# please don't modify manually

ulimit -n 64000

# DAEMON="<%= @daemon_path %>"
# NAME="<%= @name %>"

DAEMON_OPTS=""

<% if @bind_ip -%>
DAEMON_OPTS="$DAEMON_OPTS --bind_ip <%= @bind_ip %>"
<% end -%>
<%= @port ? "DAEMON_OPTS=\"$DAEMON_OPTS --port #{@port}\"" : "" %>
<%= @dbpath ? "DAEMON_OPTS=\"$DAEMON_OPTS --dbpath #{@dbpath}\"" : "" %>
<%= @logdir ? "DAEMON_OPTS=\"$DAEMON_OPTS --logpath #{@logdir}/mongodb.log\"" : "" %>
<%= @auth ? "DAEMON_OPTS=\"$DAEMON_OPTS --auth\"" : "" %>
<%= @enable_journalling ? "DAEMON_OPTS=\"$DAEMON_OPTS --journal\"" : "DAEMON_OPTS=\"$DAEMON_OPTS --nojournal\"" %>
<% if @enable_rest %>
    DAEMON_OPTS="$DAEMON_OPTS --rest"
<% end %>

<% if @replicaset_name %>
DAEMON_OPTS="$DAEMON_OPTS --replSet <%= @replicaset_name %>"
<% end %>

<% if @key_file %>
DAEMON_OPTS="$DAEMON_OPTS --keyFile <%= @key_file %>"
<% end %>

<% if %w(centos redhat fedora amazon).include? node.platform -%>
DAEMON_OPTS="$DAEMON_OPTS --fork"
DBPATH="<%= @dbpath %>"
<% end -%>
